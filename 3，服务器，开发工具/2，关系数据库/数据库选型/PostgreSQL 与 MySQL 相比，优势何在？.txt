PostgreSQL 与 MySQL 相比，优势何在？
http://www.zhihu.com/question/20010554

目前在国内应用PostgreSQL做开发会不会引来性能不佳和后期维护困难的问题？
PostgreSQL的前景如何？全球有没有非常成功的应用案例？

====
楼上的回答问题很多，这两个数据库我都使用过，谈谈我的看法，这个答案有很大一部分来自于刘鑫的博客（找半天没找到地址，请读者自行google）。

一、 PostgreSQL 的稳定性极强， Innodb 等引擎在崩溃、断电之类的灾难场景下抗打击能力有了长足进步，
然而很多 MySQL 用户都遇到过Server级的数据库丢失的场景
——mysql系统库是MyISAM的，相比之下，PG数据库这方面要好一些。

二、任何系统都有它的性能极限，在高并发读写，负载逼近极限下，
PG的性能指标仍可以维持双曲线甚至对数曲线，到顶峰之后不再下降，
而 MySQL 明显出现一个波峰后下滑（5.5版本之后，在企业级版本中有个插件可以改善很多，不过需要付费）。

三、PG 多年来在 GIS 领域处于优势地位，因为它有丰富的几何类型，
实际上不止几何类型，PG有大量字典、数组、bitmap 等数据类型，
相比之下mysql就差很多，
instagram就是因为PG的空间数据库扩展POSTGIS远远强于MYSQL的my spatial而采用PGSQL的。

四、PG 的“无锁定”特性非常突出，甚至包括 vacuum 这样的整理数据空间的操作，这个和PGSQL的MVCC实现有关系。

五、PG 的可以使用函数和条件索引，这使得PG数据库的调优非常灵活，
mysql就没有这个功能，条件索引在web应用中很重要。

六、PG有极其强悍的 SQL 编程能力（9.x 图灵完备，支持递归！），
有非常丰富的统计函数和统计语法支持，比如分析函数（ORACLE的叫法，PG里叫window函数），
还可以用多种语言来写存储过程，对于R的支持也很好。
这一点上MYSQL就差的很远，很多分析功能都不支持，
腾讯内部数据存储主要是MYSQL，但是数据分析主要是HADOOP+PGSQL（听李元佳说过，但是没有验证过）。

七、PG 有多种集群架构可以选择，plproxy 可以支持语句级的镜像或分片，slony 可以进行字段级的同步设置，
standby 可以构建WAL文件级或流式的读写分离集群，同步频率和集群策略调整方便，操作非常简单。

八、一般关系型数据库的字符串有限定长度8k左右，无限长 TEXT 类型的功能受限，只能作为外部大数据访问。
而 PG 的 TEXT 类型可以直接访问，
SQL语法内置正则表达式，可以索引，还可以全文检索，或使用xml xpath。
用PG的话，文档数据库都可以省了。

九，对于WEB应用来说，复制的特性很重要，
mysql到现在也是异步复制，
pgsql可以做到同步，异步，半同步复制。
还有mysql的同步是基于binlog复制，类似oracle golden gate,是基于stream的复制，做到同步很困难，这种方式更加适合异地复制，
pgsql的复制基于wal，可以做到同步复制。
同时，pgsql还提供stream复制。

十，pgsql对于numa架构的支持比mysql强一些，比MYSQL对于读的性能更好一些，
pgsql提交可以完全异步，而mysql的内存表不够实用（因为表锁的原因）

最后说一下我感觉 PG 不如 MySQL 的地方。

第一，MySQL有一些实用的运维支持，如 slow-query.log ，
这个pg肯定可以定制出来，但是如果可以配置使用就更好了。

第二是mysql的innodb引擎，可以充分优化利用系统所有内存，
超大内存下PG对内存使用的不那么充分，

第三点，MySQL的复制可以用多级从库，
但是在9.2之前，PGSQL不能用从库带从库。

第四点，从测试结果上看，mysql 5.5的性能提升很大，单机性能强于pgsql，5.6应该会强更多.

第五点，对于web应用来说,mysql 5.6 的内置MC API功能很好用，PGSQL差一些。

另外一些：

pgsql和mysql都是背后有商业公司，而且都不是一个公司。大部分开发者，都是拿工资的。
说mysql的执行速度比pgsql快很多是不对的，速度接近，而且很多时候取决于你的配置。

对于存储过程，函数，视图之类的功能，现在两个数据库都可以支持了。

另外多线程架构和多进程架构之间没有绝对的好坏，oracle在unix上是多进程架构，在windows上是多线程架构。

很多pg应用也是24/7的应用，比如skype. 
最近几个版本VACUUM基本不影响PGSQL 运行，8.0之后的PGSQL不需要cygwin就可以在windows上运行。

至于说对于事务的支持，mysql和pgsql都没有问题。

2013-09-10

====
只提一个点：json，hstore和jsonb

提一下两者对文档对象的支持，目前JSON的应用很多，
但是mysql对json的支持显然显得不足，一半公司都是用text来存储json，然后再应用层解析，这个过程显然低效的多。

PostgreSQL对文档对象的支持则明显完善的多，json，hstore都能支持的很好，
最近比较值得注意的是最新版的PostgreSQL中的jsonb类型，完全支持索引，意味着半结构化数据的存储，混合型存储的rdbms仍可以高效的支持，
这就意味着对于mongodb这类的基于文档的数据库是个不小的威胁，
毕竟如果一个表中只有一列数据的类型是半结构化的，何必为了迁就它而整个表的设计采用schemaless的结构？

2014-03-25

====
PostgreSQL 背后有富士通，MySQL 背后是 Oracle，都是很强硬的后台呢；
PostgreSQL 似乎比 MySQL 的前景光明些；
PostgreSQL 的案例多了，什么 skype、heroku 之类的，都是世界级的应用。

最后再补充一句吧，PostgreSQL 的源码写的非常漂亮，可以说是 C 程序的典范。

2013-09-23

====
支付公司BrainTree（被Paypal收购了）有篇长博客[1]记录了他们的数据库变迁，MySQL到Postgres，遇到过什么问题，怎么解决都说了。

[1] https://www.braintreepayments.com/braintrust/scaling-postgresql-at-braintree-four-years-of-evolution

2014-03-28

====
纠正一下：

mysql支持存储过程
mysql支持半同步复制,google的补丁

innodb的mvcc基本可以做到事务无锁

楼上的Monly的摘录不知道是从哪里搞来了，把MyISAM和Innodb混在一起说了。

你的摘录中把MyISAM和mysql等同起来，现在innodb用得比较多，
MYISAM只是在很有限的情况下使用，而innodb功能非常强大，非myisam可比。

2013-10-07

====
搞了大约三年的postgres，中间也分析过mysql。

postgres的优势在于SQL标准的完备性，对于事务的支持，支持完整的SQL标准，支持事务隔离级别，
以及对于数据类型、内置函数、索引的扩展性都比mysql好。

postgres的多进程架构提高了系统的稳定性，但是也决定了它不适合在Windows上使用，linux上进程与线程的区别并不大。
事实上把postgres改成多线程这件事情很多公司也干过。

mvcc的存储提高了并发性能，但是标记删除定期vaccum会让性能抖动。

用继承的方法实现分区表，让分区表的使用不方便且性能差，这点比不上mysql。

mysql的优势在于SQL层与存储层的分离。甚至可以支持每个表使用不同的存储引擎。

2014-03-01

====
手工品买卖平台etsy使用pgsql
2014-06-21

====
postgresql的索引是可定制的，但是存储引擎是写死的，例如不能改为列存储
2013-02-09

====
只用过greeplum和oracle。
个人了解greeplum可以通过节点的方式无限的扩充，oracle则做不到。

从java开发角度来看，gp真的没oracle好用，sql容错能力差，子查询必须加别名等等。
gp的优点在于海量数据的处理能力。

顺便说下，我们的gp数据库节点老是出故障，厂商维护也解决不了问题。
下批次的采购清单了，gp基本已经出局，改用oracle一体机，性能提升不少。
2013-09-10

====
你好搂主，下面是我在网上搜到的，大家来共勉学习下吧：
我们这样的比较不想仅仅成为一份性能测试报告，因为至少从我个人来看，
对于一个数据库，稳定性和速度并不能代表一切。
对于一个成熟的数据库，稳定性肯定会日益提供。
而随着硬件性能的飞速提高，速度也不再是什么太大的问题。

这两个产品都属于开放源码的一员，性能和功能都在高速地提高和增强。
MySQL AB的人们和PostgreSQL的开发者们都在尽可能地把各自的数据库改得越来越好，
所以对于任何商业数据库使用其中的任何一个都不能算是错误的选择。

MySQL的背后是一个成熟的商业公司，而PostgreSQL的背后是一个庞大的志愿开发组。
这使得MySQL的开发过程更为慎重，而PostgreSQL的反应更为迅速。

这样的两种背景直接导致了各自固有的优点和缺点。

1、首先是速度，MySQL通常要比PostgreSQL快得多。
MySQL自已也宣称速度是他们追求的主要目标之一，
基于这个原因，MySQL在以前的文档中也曾经说过并不准备支持事务和触发器。
但是在最新的文档中，我们看到MySQL 4.0.2-alpha已经开始支持事务，
而且在MySQL的TODO中，对触发器、约束这样的注定会降低速度的功能也列入了日程。
但是，我们仍然有理由相信，MySQL将有可能一直保持速度的优势。

2、MySQL比PostgreSQL更流行，流行对于一个商业软件来说，也是一个很重要的指标，
流行意味着更多的用户，意味着经受了更多的考验，意味着更好的商业支持、意味着更多、更完善的文档资料。

3、与PostgreSQL相比，MySQL更适宜在Windows环境下运行。
MySQL作为一个本地的Windows应用程序运行(在 NT/Win2000/WinXP下，是一个服务)，
而PostgreSQL是运行在Cygwin模拟环境下。
PostgreSQL在Windows下运行没有MySQL稳定，应该是可以想象的。

4、MySQL使用了线程，而PostgreSQL使用的是进程。
在不同线程之间的环境转换和访问公用的存储区域显然要比在不同的进程之间要快得多。

5、MySQL可以适应24/7运行。
在绝大多数情况下，你不需要为MySQL运行任何清除程序。
PostgreSQL目前仍不完全适应24/7运行，这是因为你必须每隔一段时间运行一次VACUUM。

6、MySQL在权限系统上比PostgreSQL某些方面更为完善。

PostgreSQL只支持对于每一个用户在一个数据库上或一个数据表上的 INSERT、SELECT和UPDATE/DELETE的授权，

而MySQL允许你定义一整套的不同的数据级、表级和列级的权限。
对于列级的权限， PostgreSQL可以通过建立视图，并确定视图的权限来弥补。

MySQL还允许你指定基于主机的权限，这对于目前的PostgreSQL是无法实现的，但是在很多时候，这是有用的。

7、由于MySQL 4.0.2-alpha开始支持事务的概念，因此事务对于MySQL不再仅仅成为劣势。
相反，因为MySQL保留无事务的表类型。这就为用户提供了更多的选择。

8、MySQL的MERGE表提供了一个独特管理多个表的方法。

9、MySQL的myisampack可以对只读表进行压缩，此后仍然可以直接访问该表中的行。

==
1、对事务的支持与MySQL相比，经历了更为彻底的测试。
对于一个严肃的商业应用来说，事务的支持是不可或缺的。

2、MySQL对于无事务的MyISAM表。采用表锁定，一个长时间运行的查询很可能会长时间地阻碍对表的更新。
而PostgreSQL不存在这样的问题。

3、PostgreSQL支持存储过程，而目前MySQL不支持，
对于一个严肃的商业应用来说，作为数据库本身，有众多的商业逻辑的存在，
此时使用存储过程可以在较少地增加数据库服务器的负担的前提下，对这样的商业逻辑进行封装，并可以利用数据库服务器本身的内在机制对存储过程的执行进行优化。
此外存储过程的存在也避免了在网络上大量的原始的SQL语句的传输，这样的优势是显而易见的。

4、对视图的支持，视图的存在同样可以最大限度地利用数据库服务器内在的优化机制。
而且对于视图权限的合理使用，事实上可以提供行级别的权限，这是MySQL的权限系统所无法实现的。

5、对触发器的支持，触发器的存在不可避免的会影响数据库运行的效率，
但是与此同时，触发器的存在也有利于对商业逻辑的封装，可以减少应用程序中对同一商业逻辑的重复控制。
合理地使用触发器也有利于保证数据的完整性。

6、对约束的支持。约束的作用更多地表现在对数据完整性的保证上，合理地使用约束，也可以减少编程的工作量。

7、对子查询的支持。
虽然在很多情况下在SQL语句中使用子查询效率低下，而且绝大多数情况下可以使用带条件的多表连接来替代子查询，
但是子查询的存在在很多时候仍然不可避免。
而且使用子查询的SQL语句与使用带条件的多表连接相比具有更高的程序可读性。

8、支持R-trees这样可扩展的索引类型，可以更方便地处理一些特殊数据。

9、PostgreSQL可以更方便地使用UDF(用户定义函数)进行扩展。

这个问题很难说得清，而且事实上除了MySQL和PostgreSQL外，使用Oracle、Sybase、Informix等也是明智的选择。
如何你确定只在MySQL和PostgreSQL中进行选择，以下规则总是有效的。

1、如果你的操作系统是Windows，你应该使用MySQL。

2、如果你对数据库并不了十分了解，甚至不知道事务、存储过程等究竟是什么，你应该使用MySQL。

3、如果你的应用对数据的完整性和严肃性要求不高，但是追求处理的高速度。
例如是一个论坛和社区，你应该使用MySQL。

4、你的应用是一个严肃的商业应用，对数据完整性要求很高。而且你希望对一些商业数据逻辑进行很好的封装，
例如是一个网上银行，你应该使用PostgreSQL。

5、你的应用处理的是地理数据，由于R-TREES的存在，你应该使用PostgreSQL。

6、你是一个数据库内核的狂热爱好者，你甚至希望拥有你自己版本的数据库，毫无疑问，你必须使用PostgreSQL，
没准下一个PostgreSQL版本中某一个模块的作者就是你。

以上只是作者从自己的理解尽量客观公正地评价MySQL和PostgreSQL的优劣。
其中的带有倾向性的意见只代表作者个人观点，有关这两个数据库，欢迎广大朋友提出自己的看法。

个人感觉，两者都了解下吧，比如说你想学习数据库，但是你只是专注于了Oracle，Sybase什么的数据库你根本不懂，
那对你今后的就业或者搞研究，肯定是有很大的阻碍的，
学习数据库我们不能专注于某一个产品，而是关注整个行业，或许这样对未来的发展，对数据库的趋势才能掌握的很清楚。
个人意见，如有不当，还请楼主见谅。谢谢
2012-01-08

